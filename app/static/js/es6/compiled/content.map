{"version":3,"file":"content.js","sources":["/Users/jack/Documents/code/web/app/static/js/es6/content.es6.js","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/1"],"names":[],"mappings":"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","sourcesContent":["/* global editor, _ */\n/* jshint unused:false */\n\nfunction ajax(url, verb, data={}, success=r=>console.log(r), dataType='html'){//defaulting to html\n    'use strict';\n  $.ajax({url:url, type:verb, dataType:dataType, data:data, success:success});\n}\n\n\n\n(function() {\n  'use strict';\n\n  $(document).ready(initialize);\n\n  function initialize() {\n    $('#create-content').click(createContent);\n    $('#add-link').click(addLinkResource);\n    $('#add-video').click(addVideoResource);\n    getVideos();\n    getRefs();\n  }\n\n\n  function getRefs(){\n    var refs = $('.ref').map((index, r)=>{\n      var newRef = $(r).attr('data-txt').replace(/[+]/g, ' ');\n      $(r).text(newRef);\n    }).toArray();\n    console.log(refs);\n  }\n\n  function getVideos(){\n    var videos = $('.videos').find('.video').map((index, video)=>$(video).data('path')).toArray();\n    for(var i = 0; i < videos.length; i++){\n      $('.videos').append('<iframe width=560, height=315, src=\"//www.youtube.com/embed/'+videos[i]+'\", frameborder=0, allowfullscreen></iframe>');\n    }\n\t}\n\n  function addLinkResource(){\n    var resource = $('.link-resource:first').clone();\n    $(resource).children().val('').appendTo('.link-resource-shell');\n  }\n\n  function addVideoResource(){\n    var resource = $('.video-resource:first').clone();\n    $(resource).children().val('').appendTo('.video-resource-shell');\n  }\n\n  function createContent(event){\n    var array = [];\n    $('#resource-links').serialize().split('&').forEach(s=>{\n      var string = s.split('=');\n      var obj = {};\n      obj[string[0]] = string[1];\n      array.push(obj);\n    });\n\n    var titles = array.map((obj, i)=>{\n      if(i % 2 === 0){\n        return obj;\n      }\n    });\n\n    var urls = array.map((obj, i)=>{\n      if(i % 2){\n\n        return obj;\n      }\n    });\n\n    var finalTitles = _.compact(titles);\n    var finalUrls = _.compact(urls);\n\n    var resources = [];\n    for(var j = 0 ; j < finalTitles.length; j++){\n      console.log(finalTitles[j]);\n\n      var assignment = _.assign(finalTitles[j], finalUrls[j]);\n      resources.push(assignment);\n    }\n\n    var videos = $('.video-resource-shell').find('.text').map((index, video)=>{\n      var split = $(video).val().split('=');\n      return split[1];\n    }).toArray();\n    console.log(videos);\n    var html = editor.getHTML();\n    var title = $('h1').text();\n    var courseId = $('h1').data('courseid');\n    ajax(`/teacher/${courseId}/content/create`, 'POST', {title: title, bodyText:html, resources:resources, videos:videos}, html=>{\n      window.location = '/courses/edit';\n    });\n    event.preventDefault();\n  }\n\n  function clip(string){\n    return string.trim();\n  }\n\n})();\n","$__placeholder__0[$traceurRuntime.toProperty($__placeholder__1)]","$traceurRuntime.setProperty($__placeholder__0,\n          $__placeholder__1, $__placeholder__2)"]}